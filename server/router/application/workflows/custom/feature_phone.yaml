# Feature Phone Workflow - Basic Edition
# Simple keypad phone from primitives (based on Siemens SL45i proportions)

name: feature_phone_workflow
description: Creates a basic keypad phone with rounded edges
category: electronics
author: blender-ai-mcp
version: "4.0.0"

trigger_keywords:
  - feature phone
  - keypad phone
  - button phone
  - classic phone
  - old phone
  - retro phone
  - telefon przyciskowy
  - telefon z klawiatura
  - stary telefon

sample_prompts:
  - "create a classic keypad phone"
  - "make a feature phone"
  - "stworz telefon przyciskowy"

defaults:
  # Phone dimensions (from SL45i reference)
  width: 0.076
  depth: 0.020
  height: 0.210

  # Cleanup option
  clean_scene: false

  # Bevel settings
  body_bevel_width: 0.003
  body_bevel_segments: 3

parameters:
  width:
    type: float
    range: [0.05, 0.10]
    default: 0.076
    description: Phone width (X)
    semantic_hints: [width, size]
    group: dimensions

  height:
    type: float
    range: [0.15, 0.25]
    default: 0.210
    description: Phone height (Z)
    semantic_hints: [height, size]
    group: dimensions

  depth:
    type: float
    range: [0.015, 0.035]
    default: 0.020
    description: Phone depth (Y)
    semantic_hints: [depth, thickness]
    group: dimensions

  clean_scene:
    type: bool
    default: false
    description: Clean scene before building
    group: workflow

  body_bevel_width:
    type: float
    range: [0.001, 0.006]
    default: 0.003
    description: Bevel width for body
    group: style

  body_bevel_segments:
    type: int
    range: [2, 5]
    default: 3
    description: Bevel segments for smoothness
    group: style

steps:
  # =============================
  # SCENE PREP
  # =============================
  - tool: scene_clean_scene
    params:
      keep_lights_and_cameras: false
    condition: "clean_scene"
    description: Optional scene cleanup

  - tool: collection_manage
    params: {action: "create", collection_name: "Phone_Body"}

  - tool: collection_manage
    params: {action: "create", collection_name: "Phone_Screen"}

  - tool: collection_manage
    params: {action: "create", collection_name: "Phone_Buttons"}

  # =============================
  # BODY SHELL
  # =============================
  - tool: modeling_create_primitive
    params:
      primitive_type: Cube
      name: "body_shell"

  - tool: modeling_transform_object
    params:
      name: "body_shell"
      scale:
        - "$CALCULATE(width / 2)"
        - "$CALCULATE(depth / 2)"
        - "$CALCULATE(height / 2)"
      location: [0.0, 0.0, 0.0]

  - tool: modeling_add_modifier
    params:
      name: "body_shell"
      modifier_type: "BEVEL"
      properties:
        width: "$body_bevel_width"
        segments: "$body_bevel_segments"
        limit_method: "ANGLE"
        angle_limit: 0.523599

  - tool: collection_manage
    params:
      action: "move_object"
      collection_name: "Phone_Body"
      object_name: "body_shell"

  # =============================
  # SCREEN AREA
  # =============================
  - tool: modeling_create_primitive
    params:
      primitive_type: Cube
      name: "screen_frame"

  - tool: modeling_transform_object
    params:
      name: "screen_frame"
      scale:
        - "$CALCULATE(width * 0.92 / 2)"
        - "$CALCULATE(0.004)"
        - "$CALCULATE(height * 0.38 / 2)"
      location:
        - 0.0
        - "$CALCULATE(-depth / 2 - 0.002)"
        - "$CALCULATE(height * 0.15)"

  - tool: modeling_add_modifier
    params:
      name: "screen_frame"
      modifier_type: "BEVEL"
      properties:
        width: 0.001
        segments: 2
        limit_method: "ANGLE"
        angle_limit: 0.523599

  - tool: modeling_create_primitive
    params:
      primitive_type: Cube
      name: "screen_glass"

  - tool: modeling_transform_object
    params:
      name: "screen_glass"
      scale:
        - "$CALCULATE(width * 0.72 / 2)"
        - "$CALCULATE(0.001)"
        - "$CALCULATE(height * 0.24 / 2)"
      location:
        - 0.0
        - "$CALCULATE(-depth / 2 - 0.004)"
        - "$CALCULATE(height * 0.12)"

  - tool: collection_manage
    params:
      action: "move_object"
      collection_name: "Phone_Screen"
      object_name: "{obj}"
    loop:
      variable: "obj"
      values:
        - "screen_frame"
        - "screen_glass"

  # =============================
  # NAVIGATION BUTTONS
  # =============================
  - tool: modeling_create_primitive
    params:
      primitive_type: Cylinder
      name: "button_dpad"

  - tool: modeling_transform_object
    params:
      name: "button_dpad"
      rotation: [1.5708, 0.0, 0.0]
      scale:
        - "$CALCULATE(width * 0.32 / 2)"
        - "$CALCULATE(width * 0.32 / 2)"
        - "$CALCULATE(0.002)"
      location:
        - 0.0
        - "$CALCULATE(-depth / 2 - 0.003)"
        - "$CALCULATE(-height * 0.11)"

  - tool: modeling_create_primitive
    params:
      primitive_type: Cylinder
      name: "button_call"

  - tool: modeling_transform_object
    params:
      name: "button_call"
      rotation: [1.5708, 0.0, 0.0]
      scale:
        - "$CALCULATE(width * 0.24 / 2)"
        - "$CALCULATE(height * 0.08 / 2)"
        - "$CALCULATE(0.002)"
      location:
        - "$CALCULATE(-width * 0.27)"
        - "$CALCULATE(-depth / 2 - 0.003)"
        - "$CALCULATE(-height * 0.11)"

  - tool: modeling_create_primitive
    params:
      primitive_type: Cylinder
      name: "button_end"

  - tool: modeling_transform_object
    params:
      name: "button_end"
      rotation: [1.5708, 0.0, 0.0]
      scale:
        - "$CALCULATE(width * 0.24 / 2)"
        - "$CALCULATE(height * 0.08 / 2)"
        - "$CALCULATE(0.002)"
      location:
        - "$CALCULATE(width * 0.27)"
        - "$CALCULATE(-depth / 2 - 0.003)"
        - "$CALCULATE(-height * 0.11)"

  # =============================
  # KEYPAD - Row 1 (1-2-3)
  # =============================
  - tool: modeling_create_primitive
    params:
      primitive_type: Cylinder
      name: "key_1"

  - tool: modeling_transform_object
    params:
      name: "key_1"
      rotation: [1.5708, 0.0, 0.0]
      scale:
        - "$CALCULATE(width * 0.20 / 2)"
        - "$CALCULATE(height * 0.038 / 2)"
        - "$CALCULATE(0.0015)"
      location:
        - "$CALCULATE(-width * 0.28)"
        - "$CALCULATE(-depth / 2 - 0.003)"
        - "$CALCULATE(-height * 0.22)"

  - tool: modeling_create_primitive
    params:
      primitive_type: Cylinder
      name: "key_2"

  - tool: modeling_transform_object
    params:
      name: "key_2"
      rotation: [1.5708, 0.0, 0.0]
      scale:
        - "$CALCULATE(width * 0.22 / 2)"
        - "$CALCULATE(height * 0.038 / 2)"
        - "$CALCULATE(0.0015)"
      location:
        - 0.0
        - "$CALCULATE(-depth / 2 - 0.003)"
        - "$CALCULATE(-height * 0.22)"

  - tool: modeling_create_primitive
    params:
      primitive_type: Cylinder
      name: "key_3"

  - tool: modeling_transform_object
    params:
      name: "key_3"
      rotation: [1.5708, 0.0, 0.0]
      scale:
        - "$CALCULATE(width * 0.20 / 2)"
        - "$CALCULATE(height * 0.038 / 2)"
        - "$CALCULATE(0.0015)"
      location:
        - "$CALCULATE(width * 0.28)"
        - "$CALCULATE(-depth / 2 - 0.003)"
        - "$CALCULATE(-height * 0.22)"

  # =============================
  # KEYPAD - Row 2 (4-5-6)
  # =============================
  - tool: modeling_create_primitive
    params:
      primitive_type: Cylinder
      name: "key_4"

  - tool: modeling_transform_object
    params:
      name: "key_4"
      rotation: [1.5708, 0.0, 0.0]
      scale:
        - "$CALCULATE(width * 0.20 / 2)"
        - "$CALCULATE(height * 0.038 / 2)"
        - "$CALCULATE(0.0015)"
      location:
        - "$CALCULATE(-width * 0.28)"
        - "$CALCULATE(-depth / 2 - 0.003)"
        - "$CALCULATE(-height * 0.28)"

  - tool: modeling_create_primitive
    params:
      primitive_type: Cylinder
      name: "key_5"

  - tool: modeling_transform_object
    params:
      name: "key_5"
      rotation: [1.5708, 0.0, 0.0]
      scale:
        - "$CALCULATE(width * 0.22 / 2)"
        - "$CALCULATE(height * 0.038 / 2)"
        - "$CALCULATE(0.0015)"
      location:
        - 0.0
        - "$CALCULATE(-depth / 2 - 0.003)"
        - "$CALCULATE(-height * 0.28)"

  - tool: modeling_create_primitive
    params:
      primitive_type: Cylinder
      name: "key_6"

  - tool: modeling_transform_object
    params:
      name: "key_6"
      rotation: [1.5708, 0.0, 0.0]
      scale:
        - "$CALCULATE(width * 0.20 / 2)"
        - "$CALCULATE(height * 0.038 / 2)"
        - "$CALCULATE(0.0015)"
      location:
        - "$CALCULATE(width * 0.28)"
        - "$CALCULATE(-depth / 2 - 0.003)"
        - "$CALCULATE(-height * 0.28)"

  # =============================
  # KEYPAD - Row 3 (7-8-9)
  # =============================
  - tool: modeling_create_primitive
    params:
      primitive_type: Cylinder
      name: "key_7"

  - tool: modeling_transform_object
    params:
      name: "key_7"
      rotation: [1.5708, 0.0, 0.0]
      scale:
        - "$CALCULATE(width * 0.20 / 2)"
        - "$CALCULATE(height * 0.038 / 2)"
        - "$CALCULATE(0.0015)"
      location:
        - "$CALCULATE(-width * 0.28)"
        - "$CALCULATE(-depth / 2 - 0.003)"
        - "$CALCULATE(-height * 0.34)"

  - tool: modeling_create_primitive
    params:
      primitive_type: Cylinder
      name: "key_8"

  - tool: modeling_transform_object
    params:
      name: "key_8"
      rotation: [1.5708, 0.0, 0.0]
      scale:
        - "$CALCULATE(width * 0.22 / 2)"
        - "$CALCULATE(height * 0.038 / 2)"
        - "$CALCULATE(0.0015)"
      location:
        - 0.0
        - "$CALCULATE(-depth / 2 - 0.003)"
        - "$CALCULATE(-height * 0.34)"

  - tool: modeling_create_primitive
    params:
      primitive_type: Cylinder
      name: "key_9"

  - tool: modeling_transform_object
    params:
      name: "key_9"
      rotation: [1.5708, 0.0, 0.0]
      scale:
        - "$CALCULATE(width * 0.20 / 2)"
        - "$CALCULATE(height * 0.038 / 2)"
        - "$CALCULATE(0.0015)"
      location:
        - "$CALCULATE(width * 0.28)"
        - "$CALCULATE(-depth / 2 - 0.003)"
        - "$CALCULATE(-height * 0.34)"

  # =============================
  # KEYPAD - Row 4 (*-0-#)
  # =============================
  - tool: modeling_create_primitive
    params:
      primitive_type: Cylinder
      name: "key_star"

  - tool: modeling_transform_object
    params:
      name: "key_star"
      rotation: [1.5708, 0.0, 0.0]
      scale:
        - "$CALCULATE(width * 0.18 / 2)"
        - "$CALCULATE(height * 0.038 / 2)"
        - "$CALCULATE(0.0015)"
      location:
        - "$CALCULATE(-width * 0.25)"
        - "$CALCULATE(-depth / 2 - 0.003)"
        - "$CALCULATE(-height * 0.40)"

  - tool: modeling_create_primitive
    params:
      primitive_type: Cylinder
      name: "key_0"

  - tool: modeling_transform_object
    params:
      name: "key_0"
      rotation: [1.5708, 0.0, 0.0]
      scale:
        - "$CALCULATE(width * 0.20 / 2)"
        - "$CALCULATE(height * 0.038 / 2)"
        - "$CALCULATE(0.0015)"
      location:
        - 0.0
        - "$CALCULATE(-depth / 2 - 0.003)"
        - "$CALCULATE(-height * 0.40)"

  - tool: modeling_create_primitive
    params:
      primitive_type: Cylinder
      name: "key_hash"

  - tool: modeling_transform_object
    params:
      name: "key_hash"
      rotation: [1.5708, 0.0, 0.0]
      scale:
        - "$CALCULATE(width * 0.18 / 2)"
        - "$CALCULATE(height * 0.038 / 2)"
        - "$CALCULATE(0.0015)"
      location:
        - "$CALCULATE(width * 0.25)"
        - "$CALCULATE(-depth / 2 - 0.003)"
        - "$CALCULATE(-height * 0.40)"

  # =============================
  # BUTTON BEVELS
  # =============================
  - tool: modeling_add_modifier
    params:
      name: "{obj}"
      modifier_type: "BEVEL"
      properties:
        width: 0.0003
        segments: 2
        limit_method: "ANGLE"
        angle_limit: 0.785398
    loop:
      variable: "obj"
      values:
        - "button_dpad"
        - "button_call"
        - "button_end"
        - "key_1"
        - "key_2"
        - "key_3"
        - "key_4"
        - "key_5"
        - "key_6"
        - "key_7"
        - "key_8"
        - "key_9"
        - "key_0"
        - "key_star"
        - "key_hash"

  # =============================
  # COLLECTION ASSIGNMENT
  # =============================
  - tool: collection_manage
    params:
      action: "move_object"
      collection_name: "Phone_Buttons"
      object_name: "{obj}"
    loop:
      variable: "obj"
      values:
        - "button_dpad"
        - "button_call"
        - "button_end"
        - "key_1"
        - "key_2"
        - "key_3"
        - "key_4"
        - "key_5"
        - "key_6"
        - "key_7"
        - "key_8"
        - "key_9"
        - "key_0"
        - "key_star"
        - "key_hash"
