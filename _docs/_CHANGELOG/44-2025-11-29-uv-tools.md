# 44 - UV Tools (TASK-024)

**Date:** 2025-11-29
**Version:** 1.17.0

---

## Summary

Implemented UV mapping tools for texture coordinate management, completing TASK-024. Three new tools provide comprehensive UV workflow support:

- **uv_unwrap**: Automatic UV unwrapping with multiple projection methods (SMART_PROJECT, CUBE, CYLINDER, SPHERE, UNWRAP)
- **uv_pack_islands**: Optimizes UV island layout for texture space efficiency
- **uv_create_seam**: Marks or clears UV seams on selected edges

---

## New Tools

### 1. uv_unwrap

**Tags:** `[EDIT MODE][SELECTION-BASED][DESTRUCTIVE]`

Unwraps selected faces to UV space using specified projection method.

**Args:**
- `object_name`: Target object (default: active object)
- `method`: Projection method - SMART_PROJECT, CUBE, CYLINDER, SPHERE, UNWRAP
- `angle_limit`: Angle threshold for SMART_PROJECT (degrees, 0-89)
- `island_margin`: Space between UV islands (0.0-1.0)
- `scale_to_bounds`: Scale UVs to fill 0-1 space

**Workflow:** BEFORE → mesh_select | AFTER → uv_pack_islands

### 2. uv_pack_islands

**Tags:** `[EDIT MODE][SELECTION-BASED][DESTRUCTIVE]`

Packs UV islands for optimal texture space usage.

**Args:**
- `object_name`: Target object (default: active object)
- `margin`: Space between packed islands (0.0-1.0)
- `rotate`: Allow rotation for better packing
- `scale`: Allow scaling islands to fill space

**Workflow:** BEFORE → uv_unwrap

### 3. uv_create_seam

**Tags:** `[EDIT MODE][SELECTION-BASED][NON-DESTRUCTIVE]`

Marks or clears UV seams on selected edges.

**Args:**
- `object_name`: Target object (default: active object)
- `action`: 'mark' to add seams, 'clear' to remove

**Workflow:** BEFORE → mesh_select_targeted | AFTER → uv_unwrap (with UNWRAP method)

---

## Architecture

### Files Modified/Created

| Layer | File | Changes |
|-------|------|---------|
| Domain | `server/domain/tools/uv.py` | Added `unwrap`, `pack_islands`, `create_seam` abstract methods |
| Application | `server/application/tool_handlers/uv_handler.py` | Implemented handler methods |
| Adapter | `server/adapters/mcp/areas/uv.py` | Added MCP tool definitions with semantic tags |
| Addon | `blender_addon/application/handlers/uv.py` | Implemented Blender API calls |
| Registration | `blender_addon/__init__.py` | Registered RPC handlers |

### RPC Commands

- `uv.unwrap`
- `uv.pack_islands`
- `uv.create_seam`

---

## Testing

### Unit Tests (26 tests)

`tests/unit/tools/uv/test_uv_tools.py`

- **TestUVUnwrap**: 12 tests covering all projection methods and error handling
- **TestUVPackIslands**: 6 tests for island packing
- **TestUVCreateSeam**: 8 tests for seam marking/clearing

### E2E Tests

`tests/e2e/tools/uv/test_uv_tools.py`

- 12 new integration tests for all UV operations

---

## Dependencies

- None (uses existing infrastructure)

---

## Related Tasks

- [TASK-014-11](../_TASKS/TASK-014-11_UV_List_Maps.md) - UV List Maps (prerequisite)
- [TASK-023](../_TASKS/TASK-023_Material_Tools.md) - Material Tools (related workflow)
